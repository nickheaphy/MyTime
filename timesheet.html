<!DOCTYPE html>
<html>
  <head>
    <style>
        body {
            background-color: #FF3CAC;
            background-image: linear-gradient(225deg, #FF3CAC 0%, #784BA0 50%, #2B86C5 100%);
        }

        #calendarholder {
            background-color: white;
            margin: 40px;
            padding: 15px;
            border-radius: 15px;
            box-shadow: 0px 0px 25px 0px rgb(0, 0, 0);
            height: 100%;
        }

    </style>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <link href='https://cdn.jsdelivr.net/npm/bootstrap-icons@1.8.1/font/bootstrap-icons.css' rel='stylesheet'>
    <script src='https://cdn.jsdelivr.net/npm/fullcalendar/index.global.min.js'></script>
    <script src='helperfunctions.js'></script>
    <script>
        // global variable to hold the categories, event descriptions and customers
        var categoriesArray = [];
        var descriptionArray = [];
        var customerArray = [];

        function buildDescriptionDatalist() {
            descriptionArray = [...new Set(descriptionArray)].sort()
            var desc = document.getElementById("descriptionOptions")
            desc.replaceChildren();
            for (i=0; i< descriptionArray.length; i++) {
                var option = document.createElement('option');
                option.value = descriptionArray[i];
                desc.appendChild(option);
            }
        }

        function buildCustomerDatalist() {
            customerArray = [...new Set(customerArray)].sort()
            var cust = document.getElementById("customerOptions")
            cust.replaceChildren();
            for (i=0; i< customerArray.length; i++) {
                // remove if the project is closed (contains a ! at end)
                if (customerArray[i].indexOf("!)") == -1) {
                    var option = document.createElement('option');
                    option.value = customerArray[i];
                    cust.appendChild(option);
                }
            }
        }

        function buildPrimaryCategories(selectedCategoryID) {
            // from the Json, build the UI
            // note that the categoriesArray is a global variable
            var pc = document.getElementById("primaryLogTypeRadio")
            pc.replaceChildren();
            for (let i = 0; i < categoriesArray.length; i++) {
                var newDiv = document.createElement("div");
                newDiv.setAttribute('class','form-check form-check-inline')
                radioInput = document.createElement('input');
                radioInput.setAttribute('class', 'form-check-input')
                radioInput.setAttribute('type', 'radio');
                radioInput.setAttribute('name','primaryLogType');
                radioInput.setAttribute('value', categoriesArray[i].ID.toString())
                radioInput.setAttribute('id', 'primaryLogTypeRadio'+categoriesArray[i].ID.toString())
                if (categoriesArray[i].ID == selectedCategoryID) {
                    radioInput.checked = true;
                }
                // not sure this is the best way to do this...
                radioInput.setAttribute('onchange', 'buildSecondaryCategories('+categoriesArray[i].ID.toString()+', 0)')
                newDiv.appendChild(radioInput)
                radioLabel = document.createElement("label")
                radioLabel.setAttribute('class', 'form-check-label')
                radioLabel.setAttribute('for','primaryLogTypeRadio'+categoriesArray[i].ID.toString())
                radioLabel.innerHTML = categoriesArray[i].Name
                newDiv.appendChild(radioLabel)
                pc.appendChild(newDiv)
            }
        }

        function buildSecondaryCategories(selectedPrimaryID, selectedSecondaryID) {
            // from the Json, build the UI
            // note that the categoriesArray is a global variable
            var pc = document.getElementById("secondaryLogTypeRadio")
            pc.replaceChildren();
            for (let i = 0; i < categoriesArray.length; i++) {
                if (categoriesArray[i].ID == selectedPrimaryID) {
                    document.getElementById("bgcolour").value = categoriesArray[i].Colour
                    for (let j = 0; j < categoriesArray[i].Secondary.length; j++) {
                        var newDiv = document.createElement("div");
                        newDiv.setAttribute('class','form-check form-check-inline')
                        radioInput = document.createElement('input');
                        radioInput.setAttribute('class', 'form-check-input')
                        radioInput.setAttribute('type', 'radio');
                        radioInput.setAttribute('name','secondaryLogType');
                        radioInput.setAttribute('value', categoriesArray[i].Secondary[j].ID.toString())
                        radioInput.setAttribute('id', 'secondaryLogTypeRadio'+categoriesArray[i].Secondary[j].ID.toString())
                        if (categoriesArray[i].Secondary[j].ID == selectedSecondaryID) {
                            radioInput.checked = true;
                        }
                        newDiv.appendChild(radioInput)
                        radioLabel = document.createElement("label")
                        radioLabel.setAttribute('class', 'form-check-label')
                        radioLabel.setAttribute('for','secondaryLogTypeRadio'+categoriesArray[i].Secondary[j].ID.toString())
                        radioLabel.innerHTML = categoriesArray[i].Secondary[j].Name
                        newDiv.appendChild(radioLabel)
                        pc.appendChild(newDiv)
                    }
                    break
                }
            }
        }

        //Handle the save button being pressed
        async function saveEventData() {
            const form = document.getElementById("eventForm")
            //get the form data
            const formdata = serializeForm(form)

            // perform validation here
            // check that fields are filled in

            // also need to figure out if we are editing an existing
            // event.
            console.log(formdata)
            if (validateFormData(formdata)) {
            
                //write/update the database
                const data = new URLSearchParams();
                for (const pair of new FormData(form)) {
                    data.append(pair[0], pair[1]);
                }
                const responce = await fetch("/saveEventDatatoDB", {
                    method: "POST",
                    headers: {
                        "Content-Type": "application/x-www-form-urlencoded"
                    },
                    body: data
                })
                console.log("Save to database Ajax ")
                console.log(data)
                var neweventid = await responce.text()
                console.log("New event id: " + neweventid)
                // write the event to screen
                // or delete and add with the new details
                if (myTimeCalendar.getEventById(formdata.eventid) != null) {
                    myTimeCalendar.getEventById(formdata.eventid).remove()
                }
                // need to move this to after the post to db so can get the ID
                var thenewevent = myTimeCalendar.addEvent({
                    id: neweventid,
                    title: formdata.description + " [" + formdata.customer + "]",
                    start: formdata.start,
                    end: formdata.end,
                    borderColor: '#' + LightenDarkenColor(formdata.bgcolour, -30),
                    backgroundColor: "#" + formdata.bgcolour,
                    extendedProps: {
                        primaryCategory: formdata.primaryLogType,
                        secondaryCategory: formdata.secondaryLogType,
                        customer: formdata.customer,
                        description: formdata.description,
                    }
                })
                // also need to write to the description array
                descriptionArray.push(formdata.description + " [" + formdata.customer + "]")
                customerArray.push(formdata.customer)

                // close the modal
                var myModalEl = document.getElementById("exampleModal")
                var modal = bootstrap.Modal.getInstance(myModalEl)
                // reset the event id
                document.getElementById("eventid").value = 0
                modal.hide();
            } else {
                // TODO - display a missing fields warning
            }
        }

        var serializeForm = function (form) {
	        var obj = {};
	        var formData = new FormData(form);
	        for (var key of formData.keys()) {
		        obj[key] = formData.get(key);
	        }
	        return obj;
        };

        // show the modal dialog
        async function showModelDialog(arg) {
            var myModal = new bootstrap.Modal(document.getElementById("exampleModal"), {});
            // need to check the arg to figure out if we are loading an existing dialog
            // or building a new one.
            // an existing event has an id, a new one does not
            
            // set the start and end hidden fields
            document.getElementById("start").value = arg.start.toISOString()
            document.getElementById("end").value = arg.end.toISOString()
            if (arg.id) {
                document.getElementById("eventid").value = arg.id
            } else {
                document.getElementById("eventid").value = 0
            }
            // get category data
            //https://www.freecodecamp.org/news/how-to-fetch-data-from-an-api-using-the-fetch-api-in-javascript/
            const response = await fetch('/getCategoriesfromDB')
            categoriesArray = await response.json()

            // build the datalists
            buildDescriptionDatalist()
            buildCustomerDatalist()

            if (arg["id"] != undefined) {
                console.log("editing event: " + arg["id"])
                document.getElementById("exampleModalLabel").innerHTML = "Edit Event"
                document.getElementById("deleteEventButton").classList.remove("invisible")
                // add the ID to the dialog
                document.getElementById("eventid").value = arg["id"]
                // need to set the model fields based on the existing event data
                document.getElementById("description").value = arg.extendedProps.description
                document.getElementById("customer").value = arg.extendedProps.customer
                // Build the radio buttons
                buildPrimaryCategories(arg.extendedProps.primaryCategory)
                buildSecondaryCategories(arg.extendedProps.primaryCategory, arg.extendedProps.secondaryCategory)
                //set the fields
                
            } else {
                // hide the delete event button
                document.getElementById("deleteEventButton").classList.add("invisible")
                // reset the eventid to 0 (this is for new events)
                document.getElementById("eventid").value = 0
                // Build the radio buttons, default selections
                // get the previously used selections
                events = myTimeCalendar.getEvents()
                foundid = false
                for (let i = events.length - 1; i >= 0; i--) {
                    const event = events[i];
                    if (event.id) {
                        buildPrimaryCategories(event.extendedProps.primaryCategory)
                        buildSecondaryCategories(event.extendedProps.primaryCategory, event.extendedProps.secondaryCategory)
                        foundid = true
                        break;
                    }
                }
                if (!foundid) {
                    buildPrimaryCategories(1)
                    buildSecondaryCategories(1,0)
                }
            }
            
            // set the modal data
            myModal.show();
        }
        
        async function updateExistingEvent(event) {
            //user has drag an event. Need to update the times in database
            //write/update the database
            const data = new URLSearchParams();
            data.append("id", event.id);
            data.append("start", event.start.toISOString());
            data.append("end", event.end.toISOString());
            const responce = await fetch("/updateEventDatatoDB", {
                method: "POST",
                headers: {
                    "Content-Type": "application/x-www-form-urlencoded"
                },
                body: data
            })
        }

        async function deleteEventData() {
            // this is bad. This really needs some validation!
            idtodelete = document.getElementById("eventid").value
            if (idtodelete != null && idtodelete != 0) {
                const data = new URLSearchParams();
                data.append("id", idtodelete);
                const responce = await fetch("/deleteEventDatafromDB", {
                    method: "POST",
                    headers: {
                        "Content-Type": "application/x-www-form-urlencoded"
                    },
                    body: data
                })
                myTimeCalendar.getEventById(idtodelete).remove()
            }
        }

        // function to handle user changing the description
        function userChangedDesc() {
            // need to update the form fields to the ones previously used for that description
            //console.log("Need to update screen")
            // remove the customer name from the description (if present)
            descriptionselected = document.getElementById("description").value.trim()
            descriptionselectedcleaned = descriptionselected.replace(/\s*\[.+\]/g,"").trim()
            document.getElementById("description").value = descriptionselectedcleaned
            // find that text in the event array
            // TODO - this should be rewritten to pull this from the database via AJAX call as the calendar
            // events does not contain all events (currently limited by populateCalendar limit variable )
            const allevents = myTimeCalendar.getEvents()
            for (const event of allevents) {
                const descriptionandcustomer = event.extendedProps.description + " [" + event.extendedProps.customer + "]"
                //console.log(descriptionandcustomer + " ... " + descriptionselected)
                if (descriptionandcustomer == descriptionselected) {
                    document.getElementById("customer").value = event.extendedProps.customer
                    buildPrimaryCategories(event.extendedProps.primaryCategory)
                    buildSecondaryCategories(event.extendedProps.primaryCategory, event.extendedProps.secondaryCategory)
                    break;
                }
            }

            
        }

        // function to get the event data from the database
        async function populateCalendar(start, end) {
            //write/update the database
            myTimeCalendar.removeAllEvents();
            const data = new URLSearchParams();
            data.append("start", start);
            data.append("end", end);
            data.append("limit", 500); //this is actual the minimum results returned
            try {
                const responce = await fetch("/getEventDatafromDB?"+data.toString())
                const events =  await responce.json()
                console.log(events)
                if (events != null) {
                    events.forEach(event => {
                        myTimeCalendar.addEvent({
                            id: event.ID,
                            title: event.Description + " [" + event.Customer + "]",
                            start: event.Start,
                            end: event.End,
                            borderColor: '#' + LightenDarkenColor(event.Colour, -30),
                            backgroundColor: "#" + event.Colour,
                            display: 'block',
                            extendedProps: {
                                primaryCategory: event.Primary_id,
                                secondaryCategory: event.Secondary_id,
                                customer: event.Customer,
                                description: event.Description
                            }
                        })
                        // also populate the description and customer arrays
                        descriptionArray.push(event.Description + " [" + event.Customer + "]")
                        customerArray.push(event.Customer)
                    });
                }
            } catch (error) {
                console.log(error)
            }
            // now put in the background events
            var loop = new Date(start);
            var loopend = new Date(end);
            while(loop < loopend){
                if (loop.getDay() > 0 && loop.getDay() <=5) {
                    myTimeCalendar.addEvent({
                        start: loop.setHours(0, 0),
                        end: loop.setHours(8,30),
                        backgroundColor: '#aaa',
                        display: 'background'
                    })
                    myTimeCalendar.addEvent({
                        start: loop.setHours(12, 0),
                        end: loop.setHours(13, 0),
                        backgroundColor: '#aaa',
                        display: 'background'
                    })
                    myTimeCalendar.addEvent({
                        start: loop.setHours(17, 0),
                        end: loop.setHours(23,59),
                        backgroundColor: '#aaa',
                        display: 'background'
                    })
                } else {
                    myTimeCalendar.addEvent({
                        start: loop.setHours(0, 0),
                        end: loop.setHours(23, 59),
                        backgroundColor: '#aaa',
                        display: 'background'
                    })
                }
                var newDate = loop.setDate(loop.getDate() + 1);
                loop = new Date(newDate);
            }
                

        }

        async function getCustomers() {
            const responce = await fetch("/getCustomersfromDB")
            customerArrayData = await responce.json()
            if (customerArrayData != null) {
                for (const customer of customerArrayData) {
                    customerArray.push(customer.Customername)
                }
            }
        }

        function renderDayHeaderContent(arg, calendar) {
            // 1. Get the date of the header
            const headerDate = arg.date;

            // 2. Filter events for this specific day
            const events = calendar.getEvents().filter(event => {
                // FullCalendar stores dates as Date objects or strings,
                // so we need to compare the day part only.
                if (!event.start) return false;

                // Use a utility to format dates for comparison (YYYY-MM-DD)
                const eventStartDateString = calendar.formatDate(event.start, { year: 'numeric', month: '2-digit', day: '2-digit' });
                const headerDateString = calendar.formatDate(headerDate, { year: 'numeric', month: '2-digit', day: '2-digit' });

                // Include the event if it falls on the header's date AND it's a timed event
                // All-day events (event.allDay === true) don't have a time duration by default.
                return eventStartDateString === headerDateString && !event.allDay;
            });

            // 3. Calculate total duration
            let totalMinutes = 0;
            events.forEach(event => {
                // Ensure both start and end exist for a duration calculation
                if (event.start && event.end && event.display != 'background') {
                    const startMs = event.start.getTime();
                    const endMs = event.end.getTime();
                    const durationMs = endMs - startMs;
                    totalMinutes += durationMs / (1000 * 60); // Convert milliseconds to minutes
                }
            });

            // 4. Format the total hours
            const totalHours = (totalMinutes / 60).toFixed(2); // two decimal place

            // 5. Construct the final HTML/DOM for the header content
            const originalContent = arg.text; // e.g., "Mon 11/24"
            const hoursDisplay = `<div class="day-total-hours"><small>${totalHours} hrs</small></div>`;

            const container = document.createElement('div');
            container.className = 'day-header-container';
            container.innerHTML = `<div>${originalContent}</div>${hoursDisplay}`;

            return { domNodes: [container] };
        }

        // This function needs access to the calendar instance
        function calculateViewTotalHours(calendar) {
            // Get the current view's start and end dates (excluding time)
            const viewStart = calendar.view.activeStart;
            const viewEnd = calendar.view.activeEnd;

            console.log("View Start: " + viewStart.toISOString() + ", View End: " + viewEnd.toISOString());

            // //convert to Monday start and Sunday end
            // function findMonday(unixTimeStamp) {
            //     let startDate = new Date(unixTimeStamp * 1000);
            //     let startDay = startDate.getUTCDay();
            //     let diff = startDate.getUTCDate() - startDay + (startDay === 0 ? -6 : 1);
            //     let monday = new Date(startDate.setUTCDate(diff));
            //     monday.setUTCHours(0, 0, 0, 0);
            //     monday = new Date(monday).valueOf();
            //     return monday;
            // }

            //const adjustedViewStart = new Date(findMonday(Math.floor(viewEnd.getTime() / 1000)));
            const adjustedViewEnd = new Date(viewStart);
            adjustedViewEnd.setDate(adjustedViewEnd.getDate() + 7); //offset by 7 days

            console.log("Calculating total hours from " + viewStart.toISOString() + " to " + adjustedViewEnd.toISOString());
            let totalMinutes = 0;

            calendar.getEvents().forEach(event => {
                // 1. Skip all-day events and background events
                if (event.allDay || !event.start || !event.end || event.display == 'background') return;

                // 2. Check for event overlap within the current view range
                // An event is visible if its start is before the view end AND its end is after the view start.
                const eventStartsBeforeViewEnds = event.start.getTime() < adjustedViewEnd.getTime();
                const eventEndsAfterViewStarts = event.end.getTime() > viewStart.getTime();

                if (eventStartsBeforeViewEnds && eventEndsAfterViewStarts) {
                    // 3. Determine the actual start and end times that fall within the view
                    const periodStart = Math.max(event.start.getTime(), viewStart.getTime());
                    const periodEnd = Math.min(event.end.getTime(), adjustedViewEnd.getTime());

                    // 4. Calculate duration for the visible portion
                    const durationMs = periodEnd - periodStart;
                    totalMinutes += durationMs / (1000 * 60); // Convert milliseconds to minutes
                    console.log(`Event ID: ${event.title}, Duration within view: ${durationMs / (1000 * 60)} minutes`);
                }
            });

            // 5. Format the total hours (e.g., 35.50 hrs)
            const totalHours = (totalMinutes / 60).toFixed(2);

            return totalHours;
        }

        function updateHoursButton(cal) {
            if (!cal) return;
            const totalHours = calculateViewTotalHours(cal);
    
            // Find the custom button by its class name (which FullCalendar assigns)
            // and update its text content.
            const button = document.querySelector('.fc-totalHours-button');
            if (button) {
                button.textContent = `Total: ${totalHours} hrs`;
            }
        }

    </script>
    <script>
        // global calendar reference
        var myTimeCalendar;
        // Full Calendar Stuff
        document.addEventListener('DOMContentLoaded', function() {
            const calendarEl = document.getElementById('calendar')
            myTimeCalendar = new FullCalendar.Calendar(calendarEl, {
                locale: 'en-gb',
                firstDay: 1,
                initialView: 'timeGridWeek',
                headerToolbar: {
                    left: 'prev,next,today',
                    center: 'title',
                    right: 'totalHours report timeGridWeek,sevenDay' // user can switch between the two
                },
                views: {
                    sevenDay: {
                        type: 'timeGridWeek',
                        duration: { days: 7 },
                        weekends: true,
                        slotMinTime: "00:00:00",
                        slotMaxTime: "23:59:59"
                    }
                },
                customButtons: {
                    report: {
                        text: 'Report',
                        click: function() {
                            // open the report page with the date range
                            window.location.href = "report.html?start=" + myTimeCalendar.view.activeStart.toISOString() + "&end=" + myTimeCalendar.view.activeEnd.toISOString()
                        }
                    },
                    totalHours: {
                        text: 'Calculating...',
                        click: function() {
                            updateHoursButton(myTimeCalendar);
                        }
                    }
                },
                slotDuration: '00:15',
                slotLabelInterval: '01:00',
                slotMinTime: "07:00:00",
                slotMaxTime: "19:00:00",
                themeSystem: 'bootstrap5',
                scrollTime: "08:30:00",
                selectable: true,
                unselectAuto: false,
                contentHeight:"auto",
                weekends: false,
                allDaySlot: false,
                selectMirror: true,
                select: function(arg) {
                    showModelDialog(arg)
                    myTimeCalendar.unselect()
                },
                eventClick: function(arg) {
                    // User has clicked on an existing item. Need to offer ability to
                    // edit or remove.
                    showModelDialog(arg.event)
                    myTimeCalendar.unselect()
                    // Need to add/remove from the database
                    // if (confirm('Are you sure you want to delete this event?')) {
                    //     arg.event.remove()
                    // }
                },
                eventChange: function(arg) {
                    console.log("eventChange")
                    updateExistingEvent(arg.event)
                },
                datesSet: function(arg) {
                    console.log(arg.start.toISOString()+ " to " + arg.end.toISOString())
                    // this should load the data from the database for the period
                    populateCalendar(arg.start.toISOString(), arg.end.toISOString())
                    getCustomers()
                    updateHoursButton(myTimeCalendar);
                },
                dayHeaderContent: (arg) => renderDayHeaderContent(arg, myTimeCalendar),
                editable: true,
                
            })

            myTimeCalendar.render()
            updateHoursButton(myTimeCalendar);
        })

    </script>
  </head>
  <body>
    <div id='calendarholder'>
        <div id='calendar'></div>
    </div>

    <!-- Modal Dialog-->
    <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <h1 class="modal-title fs-5" id="exampleModalLabel">Add Time Log</h1>
              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">

                <div class="container px-5 my-5">
                    <form id="eventForm">
                        <!-- Hidden data fields for passing stuff -->
                        <input name="start" id="start" type="hidden" />
                        <input name="end" id="end" type="hidden" />
                        <input name="bgcolour" id="bgcolour" type="hidden" />
                        <input name="eventid" id="eventid" type="hidden" value="0"/>
                        
                        <div class="form-floating mb-3">
                            <input name="description" onchange="userChangedDesc();" list="descriptionOptions" class="form-control" id="description" type="text" placeholder="Description" spellcheck="true"/>
                            <label for="description">Description</label>
                            <datalist id="descriptionOptions">
                                <!-- Populated by Javascript -->
                                <option value="Replace me">
                            </datalist>
                        </div>
                        <div class="form-floating mb-3">
                            <input name="customer" list="customerOptions" class="form-control" id="customer" type="text" placeholder="Customer" />
                            <label for="customer">Customer</label>
                            <datalist id="customerOptions">
                                <!-- Populated by Javascript -->
                                <option value="Replace me">
                            </datalist>
                        </div>
                        <div class="mb-3">
                            <label class="form-label d-block">Primary Log Type</label>
                            <div id="primaryLogTypeRadio">
                                <div class="form-check form-check-inline">
                                    <input class="form-check-input" id="optionA" type="radio" name="primaryLogType" value="optionA" />
                                    <label class="form-check-label" for="optionA">option A</label>
                                </div>
                                <div class="form-check form-check-inline">
                                    <input class="form-check-input" id="optionB" type="radio" name="primaryLogType" value="optionB" />
                                    <label class="form-check-label" for="optionB">option B</label>
                                </div>
                                <div class="form-check form-check-inline">
                                    <input class="form-check-input" id="optionC" type="radio" name="primaryLogType" value="optionC" />
                                    <label class="form-check-label" for="optionC">option C</label>
                                </div>
                            </div>
                        </div>
                        <div class="mb-3">
                            <label class="form-label d-block">Secondary Log Type</label>
                            <div id="secondaryLogTypeRadio">
                                <div class="form-check form-check-inline">
                                    <input class="form-check-input" id="optionA" type="radio" name="secondaryLogType" data-sb-validations="" />
                                    <label class="form-check-label" for="optionA">option A</label>
                                </div>
                                <div class="form-check form-check-inline">
                                    <input class="form-check-input" id="optionB" type="radio" name="secondaryLogType" data-sb-validations="" />
                                    <label class="form-check-label" for="optionB">option B</label>
                                </div>
                                <div class="form-check form-check-inline">
                                    <input class="form-check-input" id="optionC" type="radio" name="secondaryLogType" data-sb-validations="" />
                                    <label class="form-check-label" for="optionC">option C</label>
                                </div>
                            </div>
                        </div>
                        
                    </form>
                </div>

            </div>
            <div class="modal-footer">
                <button onclick="deleteEventData()" id="deleteEventButton" type="button" class="btn btn-warning" data-bs-dismiss="modal">Delete</button>
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                <button onclick="saveEventData()" id="saveEventButton" type="button" class="btn btn-primary">Save changes</button>
            </div>
          </div>
        </div>
      </div>
      <!-- End Dialog -->

      <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
  </body>
</html>